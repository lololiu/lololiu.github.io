<html>
<head><meta name="generator" content="Hexo 3.8.0">
	
	<title>SimpleXml中文文档</title>
	<meta name="keywords" content="My Blog, Spider Bitch!">
    <meta name="baidu-site-verification" content="vxDbv63a4S">
    <meta name="google-site-verification" content="9eUnNRo8qiEexz_FacVB-p-0z9OViF--gZ9kfL5hofo">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">

    
    <!--<link rel="stylesheet" href="/css/main.css">-->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootstrap-theme.min.css">
    <link href="/css/main.css?v=2" rel="stylesheet" type="text/css">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/common.js"></script>
    <!--<link rel="stylesheet" href="/css/style.css">-->
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2">
    

</head>

<body 
	
	>



    <div class="container center-block">
        <div class="col-md-1"></div>
        <div class="col-md-10 col-sm-12">
            <h1 id="SimpleXml中文文档"><a href="#SimpleXml中文文档" class="headerlink" title="SimpleXml中文文档"></a><a href="http://simple.sourceforge.net/home.php" target="_blank" rel="noopener">SimpleXml</a>中文文档</h1><p><img src="https://blog-1252889355.cos.ap-shanghai.myqcloud.com/xml_pic.png" alt=""></p>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><ul>
<li><a href="#序列化一个简单对象">序列化一个简单对象</a></li>
<li><a href="#反序列化一个简单对象">反序列化一个简单对象</a></li>
<li><a href="#嵌套对象的序列化">嵌套对象的序列化</a></li>
<li><a href="#可选元素和属性">可选元素和属性</a></li>
<li><a href="#读取元素列表">读取元素列表</a></li>
<li><a href="重写带注解的类型">重写带注解的类型</a></li>
<li><a href="#处理元素的内联列表">处理元素的内联列表</a></li>
<li><a href="#构造函数注入">构造函数注入</a></li>
<li><a href="#读取数组元素">读取数组元素(array)</a></li>
<li><a href="#为元素添加文本和属性">为元素添加文本和属性</a><br>   <a href="#处理Map对象">处理Map对象</a>    </li>
</ul>
<h3 id="序列化一个简单对象"><a href="#序列化一个简单对象" class="headerlink" title="序列化一个简单对象"></a>序列化一个简单对象</h3><p>为了将一个对象序列化成XML，必须先在对象内部添加一系列注解，这些注解的作用是告诉解析器该如何去序列化标记的这个对象。如下面代码中，一共有三个不同的注解，<code>@Root</code>用于标识根元素（root element），<code>@Element</code>用于标识XML的消息元素(message element)，最后一个<code>@Attribute</code>用于标识一个属性元素。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> String text;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> index;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Example</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">super</span>();</span><br><span class="line">   &#125;  </span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Example</span><span class="params">(String text, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.text = text;</span><br><span class="line">      <span class="keyword">this</span>.index = index;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> text;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> index;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>要序列化上述对象的实例，需要用到<a href="http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/core/Persister.html" target="_blank" rel="noopener"> Persister</a>对象，然后提供一个含有注解的对象的实例和一个输出结果，这个例子中是一个文件，当然你也可以输出为其他格式的结果。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Serializer serializer = <span class="keyword">new</span> Persister();</span><br><span class="line">Example example = <span class="keyword">new</span> Example(<span class="string">"Example message"</span>, <span class="number">123</span>);</span><br><span class="line">File result = <span class="keyword">new</span> File(<span class="string">"example.xml"</span>);</span><br><span class="line"></span><br><span class="line">serializer.write(example, result);</span><br></pre></td></tr></table></figure></p>
<p>一旦执行上述代码，对象实例将作为XML文档传输到指定的文件,生成的XML文件将包含如下所示的内容:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">example</span> <span class="attr">index</span>=<span class="string">"123"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">text</span>&gt;</span>Example message<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">example</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>除了使用对象中定义的字段名去获取XML中的相同命名的元素和属性，我们还可以自定义命名。每一个注解都包含一个<code>name</code>属性，我们可以用它来指定生成的XML中的属性或元素的名字。这确保如果对象具有不可用的字段或方法名称，可以将它们自定义为其他可以名称，如果你的代码被混淆，自定义命名唯一可以保证使序列化和反序列化对象一致的方式。下面是<code>Example</code>对象使用自定义名字的例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span>(name=<span class="string">"root"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span>(name=<span class="string">"message"</span>)</span><br><span class="line">   <span class="keyword">private</span> String text;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span>(name=<span class="string">"id"</span>)</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> index;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Example</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">super</span>();</span><br><span class="line">   &#125;  </span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Example</span><span class="params">(String text, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.text = text;</span><br><span class="line">      <span class="keyword">this</span>.index = index;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> text;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> index;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上对象在生成XML文档时会构造出跟前一个例子中不同格式的结果，这里XML的元素和属性名称都被对象中的注解名称所<code>override</code>：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">id</span>=<span class="string">"123"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">message</span>&gt;</span>Example message<span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="反序列化一个简单对象"><a href="#反序列化一个简单对象" class="headerlink" title="反序列化一个简单对象"></a>反序列化一个简单对象</h3><p>利用Persister进行XML反序列化成对象同样是很简单的事情，我们只需要提供一个通过注解标志了XML文档结构的类和一份XML文档，通过Persister对象的<code>read</code>方法，生成一个目标对象的实例。另外需要注意的是，由于方法是通用的，因此不需要从读取方法强制转换返回值。反序列化示例代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Serializer serializer = <span class="keyword">new</span> Persister();</span><br><span class="line">File source = <span class="keyword">new</span> File(<span class="string">"example.xml"</span>);</span><br><span class="line"></span><br><span class="line">Example example = serializer.read(Example.class, source);</span><br></pre></td></tr></table></figure></p>
<h3 id="嵌套对象的序列化"><a href="#嵌套对象的序列化" class="headerlink" title="嵌套对象的序列化"></a>嵌套对象的序列化</h3><p><code>Simple</code>除了可以序列化简单对象，还可以序列化内嵌对象—不管这个对象中包含多少内嵌对象、包含多少层内嵌。下面的实例代码展示了多个对象连接到一起形成一个可序列化的实体对象，最开始的<code>Configuration</code>对象中包含一个<code>Server</code>对象，而在<code>Server</code>对象中又包含一个<code>Security</code>对象：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Configuration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> Server server;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getIdentity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> id;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Server <span class="title">getServer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> server;           </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> port;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> String host;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> Security security;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> port;           </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getHost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> host;           </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Security <span class="title">getSecurity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> security;           </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Security</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">boolean</span> ssl;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> String keyStore;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSSL</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> ssl;           </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getKeyStore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> keyStore;           </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>为了创建一个初始化的配置对象，可以借助一个XML文档，这个XML文档需要与对象中的XML注解匹配。上面的<code>Configuration</code>的XML文档结构如下所示：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">id</span>=<span class="string">"1234"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">server</span> <span class="attr">port</span>=<span class="string">"80"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">host</span>&gt;</span>www.domain.com<span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">security</span> <span class="attr">ssl</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">keyStore</span>&gt;</span>example keystore<span class="tag">&lt;/<span class="name">keyStore</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">security</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>通过查看XML文档中的元素和属性与需要序列化的对象中的注解一一对应起来判断是否映射成功，映射关系非常简单，我们花一点时间就会理解并掌握。</p>
<h3 id="可选元素和属性"><a href="#可选元素和属性" class="headerlink" title="可选元素和属性"></a>可选元素和属性</h3><p>有时候，由于源XML中有些属性或者元素并不是必须返回的，又或者对象的有些字段为null无法进行序列化，因此有些情况需要对对象中的注解添加一个可选的说明，下列代码演示一个可选元素和属性的例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OptionalExample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span>(required=<span class="keyword">false</span>)</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> version;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span></span><br><span class="line">   <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span>(required=<span class="keyword">false</span>)</span><br><span class="line">   <span class="keyword">private</span> String name;   </span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> id;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getVersion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> version;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> address;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在上面对象中，<code>version</code>和<code>name</code>不是必需的字段，所以就是是XML文档中没有这两个名称的元素，这个对象也能够有效地序列化，比如下面的XML：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">optionalExample</span> <span class="attr">id</span>=<span class="string">"10"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">address</span>&gt;</span>Some example address<span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">optionalExample</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>即使没有<code>version</code>和<code>name</code>节点，此文档也可以反序列化为对象。当XML包含可选详细信息并允许更灵活的解析时，此功能非常有用。为了进一步阐明可选字段的实现，以下面的示例为例。这显示了如何从包含在文件中的上述文档中反序列化入口对象。反序列化完成后，我们可以检查对象的值：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Serializer serializer = <span class="keyword">new</span> Persister();</span><br><span class="line">File source = <span class="keyword">new</span> File(<span class="string">"example.xml"</span>);</span><br><span class="line">OptionalExample example = serializer.read(OptionalExample.class, source);</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> example.getVersion() == <span class="number">0</span>;</span><br><span class="line"><span class="keyword">assert</span> example.getName() == <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">assert</span> example.getId() == <span class="number">10</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="读取元素列表"><a href="#读取元素列表" class="headerlink" title="读取元素列表"></a>读取元素列表</h3><p>在XML配置和Java对象中，通常存在从父对象到子对象的一对多关系。为了支持这种公共关系，<code>Simple</code>已经提供了<code>ElementList</code>注解，它允许一个注解过的类作为Java集合对象中的实体。看下面示例代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertyList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ElementList</span></span><br><span class="line">   <span class="keyword">private</span> List&lt;Entry&gt; list;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> List <span class="title">getProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> list;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span></span><br><span class="line">   <span class="keyword">private</span> String key;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> String value;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>从上面的代码片段中可以看到列表元素的注解，字段类型被实例化为来自Java集合框架的匹配的具体对象，通常它是一个数组列表，但是其实它可以是任何的集合对象，只要字段类型声明提供一个具体的实现类型，而不是上面示例中所示的抽象列表类型。</p>
<p>下面是与上面类匹配的XML文档。这里每个<code>entry</code>元素将使用声明<code>Entry</code>类进行反序列化，并插入到创建的集合实例中。一旦所有入口对象已经被反序列化，PropertyList对象实例中会有一个包含各个属性对象的<code>Entry</code>集合。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">propertyList</span> <span class="attr">name</span>=<span class="string">"example"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">value</span>&gt;</span>first value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">value</span>&gt;</span>first value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"three"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">value</span>&gt;</span>first value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"four"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">value</span>&gt;</span>first value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">propertyList</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>从上述示例可以看出，每个条目的细节取自集合的通用类型。它声明一个列表，其条目类作为其通用参数。这种类型的声明通常是不可能的，例如如果专用列表包含多个通用类型，其中一个是用于反序列化或序列化的正确类型。在这种情况下，必须明确提供类型。请参见以下示例。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExampleList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ElementList</span>(type=C.class)</span><br><span class="line">   <span class="keyword">private</span> SpecialList&lt;A, B, C&gt; list;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> SpecialList&lt;A, B, C&gt; <span class="title">getSpecialList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> list;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在上面的例子中，特殊列表有三个通用参数，但是只有一个用作集合的通用参数。可以看出，当需要声明使用哪种类型时，可以通过<code>ElementList</code>注解的type属性来完成。</p>
<h3 id="重写带注解的类型"><a href="#重写带注解的类型" class="headerlink" title="重写带注解的类型"></a>重写带注解的类型</h3><p>为了在反序列化过程中容纳动态类型，可在XML元素中添加一个<code>class</code>属性，确保该元素可以被实例化为属性中声明的类型。这样的话类中的字段和方法类型也可以去引用抽象类和接口，它还允许将多个类型添加到带有注解的集合中。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Task</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">execute</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">implements</span> <span class="title">Task</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> Task task;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> task.execute();</span><br><span class="line">   &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DivideTask</span> <span class="keyword">implements</span> <span class="title">Task</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span>(name=<span class="string">"left"</span>)</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">float</span> text;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span>(name=<span class="string">"right"</span>)</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">float</span> right;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> left / right;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MultiplyTask</span> <span class="keyword">implements</span> <span class="title">Task</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span>(name=<span class="string">"first"</span>)</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> first;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span>(name=<span class="string">"second"</span>)</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> second;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> first * second;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这个<code>class</code>属性必须是完全限定类名，以便上下文类加载器可以加载它。下面的示例XML文档声明了需要反序列化的<code>task</code>对象的<code>class</code>类型，这样通过XML中<code>class</code>属性类型，就可动态指定<code>Example</code>类中的<code>Task</code>类型的<code>task</code>对象其具体实现是<code>DivideTask</code>而不是<code>MultiplyTask</code>：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">example</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">task</span> <span class="attr">class</span>=<span class="string">"example.demo.DivideTask"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">left</span>&gt;</span>16.5<span class="tag">&lt;/<span class="name">left</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">right</span>&gt;</span>4.1<span class="tag">&lt;/<span class="name">right</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">task</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">example</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>为了执行XML文档中描述的<code>task</code>，可以使用以下代码。这里假设XML源包含在文件中。一旦示例对象已被反序列化，则可以执行任务并获取结果。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Serializer serializer = <span class="keyword">new</span> Persister();</span><br><span class="line">File example = <span class="keyword">new</span> File(<span class="string">"example.xml"</span>);</span><br><span class="line">Example example = serializer.read(Example.class, example)</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> value = example.execute();</span><br></pre></td></tr></table></figure></p>
<h3 id="处理元素的内联列表"><a href="#处理元素的内联列表" class="headerlink" title="处理元素的内联列表"></a>处理元素的内联列表</h3><p>有时候处理一些第三方XML也许会遇到如下所示的XML文档，一组相关联的元素（类似数组）并没有使用父元素包起来而和其他元素放在同一层级。为了处理这样的结构，我们可以将元素列表注解配置为忽略列表的父元素。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">propertyList</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>example<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>first value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>second value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"three"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>third value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">propertyList</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在上述XML文档中，有一系列<code>entry</code>元素，但与前面的示例不同，这些元素不包含在父元素中。为了实现这一点，<a href="http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/ElementList.html" target="_blank" rel="noopener">ElementList</a>注解的<code>inline</code>属性可以设置为true。以下代码段演示了如何使用<code>inline</code>属性来处理上述XML文档。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertyList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ElementList</span>(inline=<span class="keyword">true</span>)</span><br><span class="line">   <span class="keyword">private</span> List&lt;Entry&gt; list;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> List <span class="title">getProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> list;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用内联元素列表有很多条件。首先，内联列表中的每个元素必须一个接一个放置，它们不能分散在其他元素之间。此外，列表中的每个条目类型必须具有相同的根名称，为了说明请看以下示例。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> example.demo;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Attribute</span></span><br><span class="line">    <span class="keyword">protected</span> String key;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Element</span></span><br><span class="line">    <span class="keyword">protected</span> String value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValidEntry</span> <span class="keyword">extends</span> <span class="title">Entry</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InvalidEntry</span> <span class="keyword">extends</span> <span class="title">Entry</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Root</span>(name=<span class="string">"entry"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedEntry</span> <span class="keyword">extends</span> <span class="title">InvalidEntry</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面所有的类型都继承自相同的基本类型，因此它们都可以成为<code>propertyList</code>的备选项。然而，虽然所有类型都可以通过使用列表成功进行序列化和反序列化，但是却只有部分可以在内联列表中序列化。例如，类型<code>InvalidEntry</code>不能被序列化，因为它将使用与所有其他实体实现不同的名称来序列化。<code>InvalidEntry</code>对象具有<code>Root</code>注解，这意味着其XML元素名称将为“InvalidEntry”。为了与内联列表一起使用，所有对象必须具有相同的XML元素名称“entry”。<code>FixedEntry</code>通过继承<code>InvalidEntry</code>并明确指定名称为“entry”，因此在内联列表中使用是没有任何问题的。下面的XML文档表示在内联列表中表示<code>entry</code>类型的多种混合实现。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">propertyList</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>example<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"one"</span> <span class="attr">class</span>=<span class="string">"example.demo.ValidEntry"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>first value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"two"</span> <span class="attr">class</span>=<span class="string">"example.demo.FixedEntry"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>second value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"three"</span> <span class="attr">class</span>=<span class="string">"example.demo.Entry"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>third value<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">propertyList</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>内联列表中的所有上述<code>entry</code>元素都包含相同的XML元素名称。此外，每个类型都被指定为<code>Entry</code>的子类实现。</p>
<h3 id="构造函数注入"><a href="#构造函数注入" class="headerlink" title="构造函数注入"></a>构造函数注入</h3><p>在我们的程序中有时候需要一些不可变对象，这些对象没有相应字段的setters方法，它们通过使用构造函数来注入数据或设置内部状态。当你想序列化或反序列化一个不可变对象，也不想提供setters，你可以这么做。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;Order&gt; orders;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OrderManager</span><span class="params">(@ElementList(name=<span class="string">"orders"</span>)</span> List&lt;Order&gt; orders) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.orders = orders;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ElementList</span>(name=<span class="string">"orders"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Order&gt; <span class="title">getOrders</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> orders;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Attribute</span>(name=<span class="string">"name"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Element</span>(name=<span class="string">"product"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String product;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Order</span><span class="params">(@Attribute(name=<span class="string">"name"</span>)</span> String name, </span></span><br><span class="line"><span class="function">                 @<span class="title">Element</span><span class="params">(name=<span class="string">"product"</span>)</span> String product) </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.product = product;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> product;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的代码说明了一个包含不可变<code>List&lt;Order&gt;</code>列表对象的<code>OrderManager</code>。在反序列化时，值从XML文档获取并注入到构造函数中以实例化对象。这是一个在序列化框架中并不常见的功能，但是这种构造函数注入有一个限制，它必须在get方法或字段上添加注解，以便在序列化时，<code>persister</code>知道在哪里获得要写入的数据。例如在上面的代码中，如果<code>getOrders</code>方法没有注释，那么就没有办法确定如何写<code>orders</code>对象。下面是由<code>OrderManager</code>序列化产生的示例XML：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">orderManager</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">order</span> <span class="attr">name</span>=<span class="string">"AX101"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">product</span>&gt;</span>Product A<span class="tag">&lt;/<span class="name">product</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">order</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">order</span> <span class="attr">name</span>=<span class="string">"AX102"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">product</span>&gt;</span>Product B<span class="tag">&lt;/<span class="name">product</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">order</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">order</span> <span class="attr">name</span>=<span class="string">"AX103"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">product</span>&gt;</span>Product C<span class="tag">&lt;/<span class="name">product</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">order</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">orderManager</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="读取数组元素"><a href="#读取数组元素" class="headerlink" title="读取数组元素"></a>读取数组元素</h3><p><code>Simple</code>除了可以将XML反序列化到一个集合(Collection )里，也可以对数组(array)进行序列化和反序列化。然而，与<code>@ElementList</code>注解不同，<code>ElementArray</code>注解可以反序列化原始值，如int数组，char数组等。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddressBook</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ElementArray</span></span><br><span class="line">   <span class="keyword">private</span> Address[] addresses;   </span><br><span class="line"></span><br><span class="line">   <span class="meta">@ElementArray</span></span><br><span class="line">   <span class="keyword">private</span> String[] names;        </span><br><span class="line"></span><br><span class="line">   <span class="meta">@ElementArray</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span>[] ages;   </span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> Address[] getAddresses() &#123;</span><br><span class="line">      <span class="keyword">return</span> addresses;           </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> String[] getNames() &#123;</span><br><span class="line">      <span class="keyword">return</span> names;           </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">int</span>[] getAges() &#123;</span><br><span class="line">      <span class="keyword">return</span> ages;           </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span>(required=<span class="keyword">false</span>)</span><br><span class="line">   <span class="keyword">private</span> String house;        </span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> String street;  </span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> String city;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getHouse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> house;           </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getStreet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> street;           </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getCity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> city;           </span><br><span class="line">   &#125;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面对象的原始类型（包括基本类型int和引用类型string）数组需要提供一个实体名称的属性，因为原始类型不能使用<code>@root</code>注解，必须要有一个属性告诉解析器XML元素的类型。上面对象生成的XML文档：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">addressBook</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">addresses</span> <span class="attr">length</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">house</span>&gt;</span>House 33<span class="tag">&lt;/<span class="name">house</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">street</span>&gt;</span>Sesame Street<span class="tag">&lt;/<span class="name">street</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">city</span>&gt;</span>City<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">street</span>&gt;</span>Some Street<span class="tag">&lt;/<span class="name">street</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">city</span>&gt;</span>The City<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">house</span>&gt;</span>Another House<span class="tag">&lt;/<span class="name">house</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">street</span>&gt;</span>My Street<span class="tag">&lt;/<span class="name">street</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">city</span>&gt;</span>Same City<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">addresses</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">names</span> <span class="attr">length</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>Jonny Walker<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>Jack Daniels<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>Jim Beam<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">names</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">ages</span> <span class="attr">length</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">int</span>&gt;</span>30<span class="tag">&lt;/<span class="name">int</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">int</span>&gt;</span>42<span class="tag">&lt;/<span class="name">int</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">int</span>&gt;</span>31<span class="tag">&lt;/<span class="name">int</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">ages</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>从以上XML可以看出，数组索引中的每个实体的命名与它的类型相同。因此，一个字符串被包装在一个’string’元素中，而一个int被包装在一个’int’元素中。这是因为<code>ElementArray</code>注解的默认名称就是数组的类型，如果你想使用其他名称，需要在注解中提供一个实体的名称，如下代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NameList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ElementArray</span>(entry=<span class="string">"name"</span>)</span><br><span class="line">   <span class="keyword">private</span> String[] names;        </span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> String[] getNames() &#123;</span><br><span class="line">      <span class="keyword">return</span> names;           </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>因为上面的代码表明了<code>entry=&quot;name&quot;</code>，所以names在XML中用<code>name</code>作为元素名称，下面的XML文档是有效的：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nameList</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">names</span> <span class="attr">length</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Jonny Walker<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Jack Daniels<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Jim Beam<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">names</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nameList</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="为元素添加文本和属性"><a href="#为元素添加文本和属性" class="headerlink" title="为元素添加文本和属性"></a>为元素添加文本和属性</h3><p>在上一个例子中我们使用<code>Element</code>注解将原始类型比如String成功地添加到了<code>names</code>元素中。其实我们还可以往这元素中再添加属性，看下面示例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Attribute</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> version;     </span><br><span class="line"></span><br><span class="line">   <span class="meta">@Text</span></span><br><span class="line">   <span class="keyword">private</span> String value;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getVersion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> version;           </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> value;              </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这个类使用<code>@Attribute</code>注解分别标记一个String类型的<code>name</code>和int类型的<code>version</code>，然后使用<code>@Text</code>注解了一个String类型的<code>value</code>，使用这个类可以序列化成如下XML：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">entry</span> <span class="attr">version</span>=<span class="string">'1'</span> <span class="attr">name</span>=<span class="string">'name'</span>&gt;</span></span><br><span class="line">   Some example text within an element</span><br><span class="line"><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>@Text</code>注解的使用有如下规则：1.每一个Entry类中只能有一个<code>@Text</code>注解。2.这个注解不能和<code>@Element</code>注解一起使用。3.只有<code>@Attribute</code>注解可以和它一起使用因为<code>@Attribute</code>不会往元素中添加任何内容。</p>
<h3 id="处理Map对象"><a href="#处理Map对象" class="headerlink" title="处理Map对象"></a>处理Map对象</h3><p>虽然在处理重复内容上我们可以使用lists，但是有时候使用<code>Map</code>会显得更方便。我们可以使用<code>@ElementMap</code>注解来处理map对象，而且这个注解可以在原始对象和综合对象都可以使用。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">key</span>=<span class="string">"one"</span>&gt;</span>first value<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">key</span>=<span class="string">"two"</span>&gt;</span>second value<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">key</span>=<span class="string">"three"</span>&gt;</span>third value<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>example name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在上述XML文档中，<code>properties</code>元素的序列可用于描述字符串的映射，其中<code>key</code>属性充当<code>properties</code>元素内的<code>value</code>的key。下面的代码演示了如何使用<code>@ElementMap</code>注解来处理上面的XML文档。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Root</span>(name=<span class="string">"properties"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertyMap</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ElementMap</span>(entry=<span class="string">"property"</span>, key=<span class="string">"key"</span>, attribute=<span class="keyword">true</span>, inline=<span class="keyword">true</span>)</span><br><span class="line">   <span class="keyword">private</span> Map&lt;String, String&gt; map;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Element</span></span><br><span class="line">   <span class="keyword">private</span> String name;  </span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Map&lt;String, Entry&gt; <span class="title">getMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> map;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上列出了<code>Simple</code>常用操作教程，更多内容请参考<a href="http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php" target="_blank" rel="noopener">官网教程</a>。</p>

            </div>
        <div class="col-md-1">
        </div>
    </div>







</body>
</html>